<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>balik Burcu - BugÃ¼nÃ¼m NasÄ±l GeÃ§ecek?</title>
</head>
<body>
<div id="plc-test-container">
    <h3 style="color: black;">BugÃ¼nÃ¼m NasÄ±l GeÃ§ecek?</h3>
    <div id="gif-container">
        <img id="fortune-image" src="https://i.hizliresim.com/4qiimxx.png" alt="Fortune Image" style="display: block;" onload="handleImageLoad()" onerror="handleImageError()">
        <img id="fortune-gif" src="https://raw.githubusercontent.com/jinefeotn/plc-master-akademi-previews/9b5e4bee90e21665270f22da6536463bfbd18c8f/sanscak.gif" alt="Fortune Teller GIF" style="display: none;" onload="handleGifLoad()" onerror="handleGifError()">
    </div>
    <button id="spin-button" onclick="startAnimation()">Yorumla</button>
    <div id="result"></div>
</div>

<style>
    #plc-test-container {
        text-align: center !important;
        padding: 20px !important;
        border: 2px solid #4a90e2 !important;
        border-radius: 8px !important;
        max-width: 600px !important;
        margin: 20px auto !important;
        background: #f9f9f9 !important;
    }
    #gif-container {
        width: 300px;
        height: 300px;
        margin: 0 auto;
        position: relative;
    }
    #fortune-image, #fortune-gif {
        width: 100%;
        height: 100%;
        object-fit: contain;
        position: absolute;
        top: 0;
        left: 0;
    }
    button {
        padding: 10px 20px !important;
        background: #4a90e2 !important;
        color: white !important;
        border: none !important;
        border-radius: 5px !important;
        cursor: pointer !important;
        margin-top: 15px !important;
        margin-right: 10px !important;
    }
    button:hover {
        background: #357abd !important;
    }
    button:disabled {
        background: #cccccc !important;
        cursor: not-allowed !important;
    }
    #result {
        margin-top: 20px;
        font-size: 16px;
        text-align: center;
        max-width: 400px;
        line-height: 1.5;
        color: black;
        margin: 15px auto;
        padding: 15px;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
</style>

<script>
    let comments = [];
    let isAnimating = false;
    const storageKey = `lastCommentTime_balik_burcu`; // Sabit anahtar: balik Burcu iÃ§in
    const COOLDOWN_TIME = 24 * 60 * 60 * 1000; // 24 saat (milisaniye cinsinden)
    const jsonUrl = 'https://raw.githubusercontent.com/jinefeotn/sitemap/refs/heads/main/balik_comments.json'; // balik Burcuâ€™na Ã¶zel JSON

    // Komik mesajlar dizisi
    const funnyMessages = [
        "SabÄ±rlÄ± ol, fal bakmak iÃ§in yÄ±ldÄ±zlarÄ±n hizalanmasÄ±nÄ± bekliyoruz! ğŸŒŸ",
        "Kahin kahve molasÄ±nda, biraz beklemen lazÄ±m! â˜•",
        "Dur bakalÄ±m, henÃ¼z 24 saat dolmadÄ±! FalÄ±n soÄŸumasÄ±nÄ± bekle! â„ï¸",
        "YÄ±ldÄ±zlar henÃ¼z hazÄ±r deÄŸil, biraz daha uyu! ğŸ˜´",
        "FalÄ±n piÅŸiyor, ama daha fÄ±rÄ±nda! Biraz daha bekle! ğŸ³",
        "Kahin bugÃ¼n tatilde, yarÄ±n tekrar gel! ğŸ–ï¸",
        "Fal bakmak iÃ§in ayÄ±n doÄŸru evresini beklemeliyiz! ğŸŒ™"
    ];

    // Son yorumlama zamanÄ±nÄ± kontrol et
    function checkCommentCooldown() {
        const lastCommentTime = localStorage.getItem(storageKey);
        if (lastCommentTime) {
            const currentTime = Date.now();
            const timeDiff = currentTime - parseInt(lastCommentTime);
            if (timeDiff < COOLDOWN_TIME) {
                // 24 saat dolmadÄ±ysa butonu devre dÄ±ÅŸÄ± bÄ±rak ve mesaj gÃ¶ster
                document.getElementById('spin-button').disabled = true;
                document.getElementById('result').textContent = 'Yorumlama iÃ§in 24 saat beklemelisin! Tekrar Yorumla butonuna basarak eÄŸlenebilirsin.';
                return false;
            } else {
                // 24 saat geÃ§tiyse, localStorage'Ä± sÄ±fÄ±rla
                localStorage.removeItem(storageKey);
                return true;
            }
        }
        return true; // Ä°lk yorumlama ise devam et
    }

    // Rastgele komik mesaj gÃ¶ster
    function showFunnyMessage() {
        const randomIndex = Math.floor(Math.random() * funnyMessages.length);
        document.getElementById('result').textContent = funnyMessages[randomIndex];
    }

    // JSON dosyasÄ±nÄ± GitHub'dan Ã§ek
    document.getElementById('result').textContent = 'YÃ¼kleniyor...';
    fetch(jsonUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error('JSON dosyasÄ± yÃ¼klenemedi: ' + response.statusText);
            }
            return response.json();
        })
        .then(data => {
            comments = data.comments;
            console.log("Yorumlar baÅŸarÄ±yla yÃ¼klendi:", comments);
            document.getElementById('result').textContent = 'Yorumla butonuna tÄ±klayarak gÃ¼nÃ¼nÃ¼n nasÄ±l geÃ§eceÄŸini Ã¶ÄŸren!';
            if (!checkCommentCooldown()) {
                document.getElementById('fortune-image').style.display = 'block';
                document.getElementById('fortune-gif').style.display = 'none';
            }
        })
        .catch(error => {
            console.error('JSON yÃ¼klenirken hata:', error);
            document.getElementById('result').textContent = 'Yorumlar yÃ¼klenemedi, lÃ¼tfen tekrar deneyin.';
        });

    function startAnimation() {
        if (comments.length === 0 || isAnimating) {
            return;
        }

        isAnimating = true;
        const spinButton = document.getElementById('spin-button');
        spinButton.disabled = true;
        document.getElementById('result').textContent = 'YorumlanÄ±yor...';

        const image = document.getElementById('fortune-image');
        const gif = document.getElementById('fortune-gif');
        image.style.display = 'none';
        gif.style.display = 'block';

        const randomIndex = Math.floor(Math.random() * comments.length);
        const selectedComment = comments[randomIndex];
        typeWriterEffect(selectedComment.text, selectedComment.luckyNumber);

        // Yorumlama zamanÄ±nÄ± localStorage'a kaydet
        localStorage.setItem(storageKey, Date.now());
    }

    function typeWriterEffect(text, luckyNumber) {
        const resultElement = document.getElementById('result');
        resultElement.innerHTML = '';
        let i = 0;
        const speed = 50; // Her harf iÃ§in milisaniye cinsinden hÄ±z

        function type() {
            if (i < text.length) {
                resultElement.innerHTML = text.substring(0, i + 1);
                i++;
                setTimeout(type, speed);
            } else {
                resultElement.innerHTML = `${text}<br><strong>GÃ¼nÃ¼n UÄŸurlu SayÄ±sÄ±: ${luckyNumber}</strong>`;
                resultElement.innerHTML += '<br><button onclick="resetAnimation()">Tekrar Yorumla</button>';
                // Yorumlama bittikten sonra GIF'i gizle ve resmi geri gÃ¶ster
                document.getElementById('fortune-gif').style.display = 'none';
                document.getElementById('fortune-image').style.display = 'block';
                isAnimating = false;
                document.getElementById('spin-button').disabled = true; // Butonu devre dÄ±ÅŸÄ± bÄ±rak
            }
        }

        type();
    }

    function resetAnimation() {
        if (checkCommentCooldown()) {
            document.getElementById('result').innerHTML = 'Yorumla butonuna tÄ±klayarak gÃ¼nÃ¼nÃ¼n nasÄ±l geÃ§eceÄŸini Ã¶ÄŸren!';
            document.getElementById('fortune-gif').style.display = 'none';
            document.getElementById('fortune-image').style.display = 'block';
            document.getElementById('spin-button').disabled = false;
        } else {
            showFunnyMessage();
            document.getElementById('fortune-gif').style.display = 'none';
            document.getElementById('fortune-image').style.display = 'block';
        }
    }

    function handleGifLoad() {
        console.log("GIF baÅŸarÄ±yla yÃ¼klendi.");
    }

    function handleGifError() {
        document.getElementById('result').textContent = 'GIF yÃ¼klenemedi, lÃ¼tfen baÅŸka bir GIF URLâ€™si kullanÄ±n veya internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.';
    }

    function handleImageLoad() {
        console.log("Resim baÅŸarÄ±yla yÃ¼klendi.");
    }

    function handleImageError() {
        document.getElementById('result').textContent = 'Resim yÃ¼klenemedi. LÃ¼tfen resmi baÅŸka bir platforma yÃ¼kleyin (Ã¶rneÄŸin, GitHub) ve yeni URLâ€™yi kullanÄ±n.';
    }

    // SaÄŸ tÄ±klamayÄ± devre dÄ±ÅŸÄ± bÄ±rak
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });
</script>
</body>
</html>
